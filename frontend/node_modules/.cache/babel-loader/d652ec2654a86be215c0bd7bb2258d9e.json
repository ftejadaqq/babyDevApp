{"ast":null,"code":"import _regeneratorRuntime from\"/Users/faithtejada/Desktop/apps/appMontessori/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/faithtejada/Desktop/apps/appMontessori/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"/Users/faithtejada/Desktop/apps/appMontessori/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/faithtejada/Desktop/apps/appMontessori/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/faithtejada/Desktop/apps/appMontessori/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/faithtejada/Desktop/apps/appMontessori/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/faithtejada/Desktop/apps/appMontessori/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import\"../styles/login.css\";import{connect}from\"react-redux\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=/*#__PURE__*/function(_Component){_inherits(Login,_Component);var _super=_createSuper(Login);function Login(){var _this;_classCallCheck(this,Login);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={};_this.onUserInput=function(e){_this.setState(_defineProperty({},e.target.id,e.target.value),function(){return console.log(_this.state);});};_this.onSubmit=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.post(\"http://localhost:6002/login\",{email:_this.state.email,password:_this.state.password});case 2:result=_context.sent;if(result.data.user_authenticated===true){_this.props.dispatch({type:\"SET_SCREEN_MODE\",screenMode:2});}else{alert(\"Incorrect login details, try again\");// edit to not an alert\n// redirect back to login page\n}console.log(result);case 5:case\"end\":return _context.stop();}}},_callee);}));return _this;}_createClass(Login,[{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/ (// login form\n_jsx(\"div\",{className:\"login-page\",children:/*#__PURE__*/_jsxs(\"div\",{onChange:this.onUserInput,className:\"login-container\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"login-heading\",children:\"Log in\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"login-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"login-form-item\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",id:\"email\",className:\"email\",placeholder:\"Email\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"login-form-item\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"password\",className:\"password\",placeholder:\"Password\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"login-form-button\",children:/*#__PURE__*/_jsx(\"button\",{className:\"login-submit-button\",onClick:this.onSubmit,id:\"login-button\",children:\"Submit\"})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"p\",{onClick:function onClick(){_this2.props.dispatch({type:\"SET_ACCOUNT_MODE\",accountMode:2});_this2.props.dispatch({type:\"SET_SCREEN_MODE\",screenMode:1});},children:\"Forgotten account?\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"login-go-to-signup\",children:/*#__PURE__*/_jsx(\"p\",{onClick:function onClick(){_this2.props.dispatch({type:\"SET_ACCOUNT_MODE\",accountMode:1});_this2.props.dispatch({type:\"SET_SCREEN_MODE\",screenMode:1});},children:\"Sign up\"})})]})]})}));}}]);return Login;}(Component);export default connect()(Login);","map":{"version":3,"sources":["/Users/faithtejada/Desktop/apps/appMontessori/frontend/src/components/login.jsx"],"names":["React","Component","connect","axios","Login","state","onUserInput","e","setState","target","id","value","console","log","onSubmit","post","email","password","result","data","user_authenticated","props","dispatch","type","screenMode","alert","accountMode"],"mappings":"0qCAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAO,qBAAP,CACA,OAASC,OAAT,KAAwB,aAAxB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,C,2FAEMC,CAAAA,K,uTACJC,K,CAAQ,E,OAGRC,W,CAAc,SAACC,CAAD,CAAO,CACnB,MAAKC,QAAL,oBAAiBD,CAAC,CAACE,MAAF,CAASC,EAA1B,CAA+BH,CAAC,CAACE,MAAF,CAASE,KAAxC,EAAiD,iBAC/CC,CAAAA,OAAO,CAACC,GAAR,CAAY,MAAKR,KAAjB,CAD+C,EAAjD,EAGD,C,OAKDS,Q,sEAAW,oKACYX,CAAAA,KAAK,CAACY,IAAN,+BAA0C,CAC7DC,KAAK,CAAE,MAAKX,KAAL,CAAWW,KAD2C,CAE7DC,QAAQ,CAAE,MAAKZ,KAAL,CAAWY,QAFwC,CAA1C,CADZ,QACHC,MADG,eAMT,GAAIA,MAAM,CAACC,IAAP,CAAYC,kBAAZ,GAAmC,IAAvC,CAA6C,CAC3C,MAAKC,KAAL,CAAWC,QAAX,CAAoB,CAClBC,IAAI,CAAE,iBADY,CAElBC,UAAU,CAAE,CAFM,CAApB,EAID,CALD,IAKO,CACLC,KAAK,CAAC,oCAAD,CAAL,CAA6C;AAC7C;AACD,CACDb,OAAO,CAACC,GAAR,CAAYK,MAAZ,EAfS,sD,yDAkBX,iBAAS,iBACP,oBACE;AACA,YAAK,SAAS,CAAC,YAAf,uBACE,aAAK,QAAQ,CAAE,KAAKZ,WAApB,CAAiC,SAAS,CAAC,iBAA3C,wBACE,WAAI,SAAS,CAAC,eAAd,oBADF,cAEE,aAAK,SAAS,CAAC,YAAf,wBACE,aAAK,SAAS,CAAC,iBAAf,wBACE,cAAO,OAAO,CAAC,OAAf,EADF,cAEE,cACE,IAAI,CAAC,OADP,CAEE,EAAE,CAAC,OAFL,CAGE,SAAS,CAAC,OAHZ,CAIE,WAAW,CAAC,OAJd,EAFF,GADF,cAUE,aAAK,SAAS,CAAC,iBAAf,wBACE,cAAO,OAAO,CAAC,UAAf,EADF,cAEE,cACE,IAAI,CAAC,UADP,CAEE,EAAE,CAAC,UAFL,CAGE,SAAS,CAAC,UAHZ,CAIE,WAAW,CAAC,UAJd,EAFF,GAVF,cAmBE,YAAK,SAAS,CAAC,mBAAf,uBACE,eACE,SAAS,CAAC,qBADZ,CAEE,OAAO,CAAE,KAAKQ,QAFhB,CAGE,EAAE,CAAC,cAHL,oBADF,EAnBF,cA4BE,kCACE,UACE,OAAO,CAAE,kBAAM,CACb,MAAI,CAACO,KAAL,CAAWC,QAAX,CAAoB,CAClBC,IAAI,CAAE,kBADY,CAElBG,WAAW,CAAE,CAFK,CAApB,EAIA,MAAI,CAACL,KAAL,CAAWC,QAAX,CAAoB,CAClBC,IAAI,CAAE,iBADY,CAElBC,UAAU,CAAE,CAFM,CAApB,EAID,CAVH,gCADF,EA5BF,cA4CE,YAAK,SAAS,CAAC,oBAAf,uBACE,UACE,OAAO,CAAE,kBAAM,CACb,MAAI,CAACH,KAAL,CAAWC,QAAX,CAAoB,CAClBC,IAAI,CAAE,kBADY,CAElBG,WAAW,CAAE,CAFK,CAApB,EAIA,MAAI,CAACL,KAAL,CAAWC,QAAX,CAAoB,CAClBC,IAAI,CAAE,iBADY,CAElBC,UAAU,CAAE,CAFM,CAApB,EAID,CAVH,qBADF,EA5CF,GAFF,GADF,EAFF,EAqED,C,mBArGiBvB,S,EAwGpB,cAAeC,CAAAA,OAAO,GAAGE,KAAH,CAAtB","sourcesContent":["import React, { Component } from \"react\";\nimport \"../styles/login.css\";\nimport { connect } from \"react-redux\";\nimport axios from \"axios\";\n\nclass Login extends Component {\n  state = {};\n\n  // dynamic user input\n  onUserInput = (e) => {\n    this.setState({ [e.target.id]: e.target.value }, () =>\n      console.log(this.state)\n    );\n  };\n\n  // object you send is called the action\n  // onSubmit sets state email and password for then axios checks if the details match what\n  // was saved at the signup stage in the database\n  onSubmit = async () => {\n    const result = await axios.post(`http://localhost:6002/login`, {\n      email: this.state.email,\n      password: this.state.password,\n    });\n\n    if (result.data.user_authenticated === true) {\n      this.props.dispatch({\n        type: \"SET_SCREEN_MODE\",\n        screenMode: 2,\n      });\n    } else {\n      alert(\"Incorrect login details, try again\"); // edit to not an alert\n      // redirect back to login page\n    }\n    console.log(result);\n  };\n\n  render() {\n    return (\n      // login form\n      <div className=\"login-page\">\n        <div onChange={this.onUserInput} className=\"login-container\">\n          <h1 className=\"login-heading\">Log in</h1>\n          <div className=\"login-form\">\n            <div className=\"login-form-item\">\n              <label htmlFor=\"email\"></label>\n              <input\n                type=\"email\"\n                id=\"email\"\n                className=\"email\"\n                placeholder=\"Email\"\n              />\n            </div>\n            <div className=\"login-form-item\">\n              <label htmlFor=\"password\"></label>\n              <input\n                type=\"password\"\n                id=\"password\"\n                className=\"password\"\n                placeholder=\"Password\"\n              />\n            </div>\n            <div className=\"login-form-button\">\n              <button\n                className=\"login-submit-button\"\n                onClick={this.onSubmit}\n                id=\"login-button\"\n              >\n                Submit\n              </button>\n            </div>\n            <div>\n              <p\n                onClick={() => {\n                  this.props.dispatch({\n                    type: \"SET_ACCOUNT_MODE\",\n                    accountMode: 2,\n                  });\n                  this.props.dispatch({\n                    type: \"SET_SCREEN_MODE\",\n                    screenMode: 1,\n                  });\n                }}\n              >\n                Forgotten account?\n              </p>\n            </div>\n            <div className=\"login-go-to-signup\">\n              <p\n                onClick={() => {\n                  this.props.dispatch({\n                    type: \"SET_ACCOUNT_MODE\",\n                    accountMode: 1,\n                  });\n                  this.props.dispatch({\n                    type: \"SET_SCREEN_MODE\",\n                    screenMode: 1,\n                  });\n                }}\n              >\n                Sign up\n              </p>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default connect()(Login);\n"]},"metadata":{},"sourceType":"module"}